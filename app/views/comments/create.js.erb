$new_comment = $('#new_comment');

if ($new_comment.parents('.popover').length > 0) {
  $new_comment.parents('.popover').prev().popover('destroy');
} else {
  $new_comment.replaceWith("<%= j(new_comment_form_for(@comment.commentable)) %>");
}

if ($('.comments').length > 0) {
  $('.comments').append("<%= j(render(@comment)) %>");
  $('form#new_comment #comment_content').val('');
}

if ($('#comments').length > 0) {
  $('#comments').append("<%= j(cell(Comment::Cell::Preview, @comment).()) %>");
  $('.main_form #comment_content').val('');
  $('.notify-user').remove();
  $('.hidden-notification-inputs').css('display', 'none');
}